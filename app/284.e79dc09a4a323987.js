"use strict";(self.webpackChunkw_a_t=self.webpackChunkw_a_t||[]).push([[284],{8284:(Et,w,l)=>{l.r(w),l.d(w,{ChatModule:()=>Dt});var r=l(6814),b=l(5743),p=l(6223),y=l(6903),k=l(9501),m=l(505),f=l(1165),A=l(6483),I=l(2495),U=l(6891),S=l(7592),x=l(4807),g=l(6663),N=l(4950),c=l(5861),d=l(6825),u=l(9006),t=l(5879),M=l(6011),v=l(2787),C=l(4563);const L=["scrollable"];function J(n,i){if(1&n&&(t.TgZ(0,"ng-option",15),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function O(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ng-select",13),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedModels=o)})("add",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updatedChatsToShow())})("remove",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updatedChatsToShow())})("clear",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updatedChatsToShow())}),t.YNc(2,J,2,2,"ng-option",14),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.selectedModels)("hideSelected",!0)("multiple",!0),t.xp6(1),t.Q6J("ngForOf",e.models)}}function Q(n,i){1&n&&t._UZ(0,"span",28)}function q(n,i){1&n&&t._UZ(0,"span",29)}function Y(n,i){1&n&&t._UZ(0,"span",30)}function H(n,i){1&n&&(t.TgZ(0,"span",31),t._UZ(1,"span",32)(2,"span",33),t.qZA())}const D=function(n){return{"bg-gray-100 dark:bg-[#050b14] dark:text-primary text-primary":n}};function V(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.selectUser(s,s.id))}),t.TgZ(2,"div",17)(3,"div",3)(4,"div",18),t._UZ(5,"img",19),t.qZA(),t.TgZ(6,"div",20)(7,"p",21),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"p",22),t._uU(11),t.ALo(12,"titlecase"),t.qZA(),t.ynx(13),t.YNc(14,Q,1,0,"span",23),t.BQk(),t.ynx(15),t.YNc(16,q,1,0,"span",24),t.BQk(),t.ynx(17),t.YNc(18,Y,1,0,"span",25),t.BQk(),t.ynx(19),t.YNc(20,H,3,0,"span",26),t.BQk(),t.qZA()()(),t._UZ(21,"div",27),t.qZA(),t.BQk()}if(2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(13,D,a.selectedUser&&a.selectedUser.id===e.id)),t.xp6(4),t.Q6J("src","/assets/images/user-profile.jpeg",t.LSH),t.xp6(3),t.AsE("",t.lcZ(9,9,e.client.identifier_name)," - ",e.model.name,""),t.xp6(3),t.Oqu(t.lcZ(12,11,e.chatsite)),t.xp6(3),t.Q6J("ngIf",e.inactiveChatDuration===a.InactiveChatDurationEnum.Active),t.xp6(2),t.Q6J("ngIf",e.inactiveChatDuration===a.InactiveChatDurationEnum.Short),t.xp6(2),t.Q6J("ngIf",e.inactiveChatDuration===a.InactiveChatDurationEnum.Medium),t.xp6(2),t.Q6J("ngIf",e.inactiveChatDuration===a.InactiveChatDurationEnum.Long)}}function B(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",34)(2,"button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.isShowChatMenu=!o.isShowChatMenu)}),t._UZ(3,"icon-menu"),t.qZA(),t.TgZ(4,"div",36)(5,"div",37),t.O4$(),t.TgZ(6,"svg",38),t._UZ(7,"ellipse",39)(8,"path",40)(9,"path",41)(10,"path",42)(11,"circle",43)(12,"circle",44)(13,"path",45)(14,"path",46)(15,"path",47)(16,"path",48)(17,"path",49)(18,"path",50)(19,"circle",51)(20,"path",52)(21,"path",53)(22,"path",54)(23,"path",55)(24,"path",56)(25,"circle",57)(26,"circle",58)(27,"path",59)(28,"path",60)(29,"circle",61)(30,"path",62)(31,"path",63)(32,"ellipse",64)(33,"ellipse",65),t.qZA()(),t.kcU(),t.TgZ(34,"p",66),t._UZ(35,"icon-message",67),t._uU(36," Click User To Chat "),t.qZA()()(),t.BQk()}}function E(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"img",94),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("src","/assets/images/"+e.loginUser.path,t.LSH)}}function F(n,i){1&n&&(t.ynx(0),t._UZ(1,"img",94),t.BQk()),2&n&&(t.xp6(1),t.Q6J("src","/assets/images/user-profile.jpeg",t.LSH))}function j(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"img",95),t.BQk()),2&n){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("src",a.getBase64ImageSrc(e.message),t.LSH)}}function $(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.message," ")}}const P=function(n){return{"justify-end":n}},K=function(n){return{"order-2":n}},G=function(n){return{"ltr:text-right rtl:text-left":n}};function R(n,i){if(1&n&&(t.TgZ(0,"div")(1,"div",86)(2,"div",87),t.YNc(3,E,2,1,"ng-container",6),t.YNc(4,F,2,1,"ng-container",6),t.qZA(),t.TgZ(5,"div",88)(6,"div",89)(7,"div",90),t.YNc(8,j,2,1,"ng-container",91),t.YNc(9,$,1,1,"ng-template",null,92,t.W1O),t.qZA()(),t.TgZ(11,"div",93),t._uU(12),t.ALo(13,"date"),t.qZA()()()()),2&n){const e=i.$implicit,a=t.MAs(10),o=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.VKq(12,P,e.send_by_us)),t.xp6(1),t.Q6J("ngClass",t.VKq(14,K,e.send_by_us)),t.xp6(1),t.Q6J("ngIf",e.send_by_us),t.xp6(1),t.Q6J("ngIf",!e.send_by_us),t.xp6(3),t.Q6J("ngClass",e.send_by_us?"ltr:rounded-br-none rtl:rounded-bl-none !bg-primary text-white":"ltr:rounded-bl-none rtl:rounded-br-none"),t.xp6(1),t.Q6J("ngIf",o.isImageMessage(e.message))("ngIfElse",a),t.xp6(3),t.Q6J("ngClass",t.VKq(16,G,e.send_by_us)),t.xp6(1),t.hij(" ",t.xi3(13,9,e.created_at,"medium")," ")}}function z(n,i){if(1&n&&(t.ynx(0),t.YNc(1,R,14,18,"div",10),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.chatMessages)}}function X(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",96)(1,"div",97)(2,"div",98)(3,"input",99),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.textMessage=o)})("keyup.enter",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.sendChatMessage(o.textMessage))}),t.qZA(),t.TgZ(4,"button",100),t._UZ(5,"icon-mood-smile"),t.qZA(),t.TgZ(6,"button",101),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.sendChatMessage(o.textMessage))}),t._UZ(7,"icon-send"),t.qZA()(),t.TgZ(8,"div",102)(9,"button",78),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.postContentModal(o.selectedUser.model.id,o.selectedUser.chatsite))}),t._UZ(10,"icon-paperclip"),t.qZA(),t.TgZ(11,"button",103),t._UZ(12,"icon-camera"),t.qZA(),t.TgZ(13,"button",103),t._UZ(14,"icon-horizontal-dots",104),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.textMessage)}}function W(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",68)(2,"div",69)(3,"div",70)(4,"button",71),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.isShowChatMenu=!o.isShowChatMenu)}),t._UZ(5,"icon-menu"),t.qZA(),t.TgZ(6,"div",72),t._UZ(7,"img",73),t.TgZ(8,"div",74),t._UZ(9,"div",75),t.qZA()(),t.TgZ(10,"div",76)(11,"p",77),t._uU(12),t.ALo(13,"titlecase"),t.ALo(14,"titlecase"),t.qZA()()(),t.TgZ(15,"div")(16,"button",78),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.viewNotesModal())}),t._UZ(17,"icon-notes-edit"),t.qZA()()(),t._UZ(18,"div",7),t.TgZ(19,"ng-scrollbar",79,80)(21,"div",81)(22,"div",82)(23,"h4",83)(24,"span",84),t._uU(25,"TEKST HIER"),t.qZA()()(),t.YNc(26,z,2,1,"ng-container",6),t.qZA()(),t.YNc(27,X,15,1,"div",85),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("src","/assets/images/user-profile.jpeg",t.LSH),t.xp6(5),t.lnq("",t.lcZ(13,6,e.selectedUser.client.identifier_name)," - ",e.selectedUser.model.name," - ",t.lcZ(14,8,e.selectedUser.chatsite),""),t.xp6(14),t.Q6J("ngIf",e.chatMessages&&e.chatMessages.length),t.xp6(1),t.Q6J("ngIf",e.isActiveChatter)}}function tt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"post-content-modal",106),t.NdJ("madeSale",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.makeSaleEvent())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("chatUUID",e.activeChatUUID)("content",e.content)("contentSalesInformationUnSold",e.unsoldImages)("contentSalesInformation",e.soldImages)}}function et(n,i){if(1&n&&(t.ynx(0),t.YNc(1,tt,1,4,"post-content-modal",105),t.BQk()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",e.isOpen&&"post-content"===e.modalId)}}function nt(n,i){1&n&&t._UZ(0,"view-notes-modal")}function at(n,i){if(1&n&&(t.ynx(0),t.YNc(1,nt,1,0,"view-notes-modal",6),t.BQk()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",e.isOpen&&"view-notes"===e.modalId)}}function ot(n,i){1&n&&t._UZ(0,"view-notes-modal")}function it(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ot,1,0,"view-notes-modal",6),t.BQk()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",e.isOpen&&"add-note"===e.modalId)}}const st=function(n){return{"min-h-[999px]":n}},lt=function(n){return{"!flex !overflow-y-auto":n}},rt=function(n){return{"!block xl:!hidden":n}};let Z=(()=>{class n{constructor(e,a,o){this.storeData=e,this.chatsService=a,this.modalService=o,this.userChatsFiltered=[],this.userChats=[],this.chatMessages=[],this.models=[],this.selectedModels=[],this.selectedUser=null,this.activeChatUUID="",this.activeChatterInOpenChat="",this.textMessage="",this.intervalId=null,this.isShowUserChat=!1,this.isShowChatMenu=!1,this.content=[],this.isModalOpen=!1,this.isActiveChatter=!1,this.notes=[],this.soldImages=[],this.unsoldImages=[],this.base64Regex=/^(?:[A-Z0-9+/]{4})*(?:[A-Z0-9+/]{2}==|[A-Z0-9+/]{3}=)?$/i,this.loginUser={id:0,name:"Alon Smith",path:"profile-34.jpeg",designation:"Software Developer"},this.InactiveChatDurationEnum=u.V,this.initStore()}ngOnInit(){this.chatsService.getOrganisationModels().then(e=>{this.models=e,this.selectedModels=this.models.map(a=>a.id)}),this.chatsService.getChats().then(e=>{this.userChatsFiltered=e,this.userChats=e,e.forEach(a=>{this.checkInActiveChatterTime(a)})})}ngAfterViewInit(){this.startFetchingData()}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId)}initStore(){var e=this;return(0,c.Z)(function*(){e.storeData.select(a=>a.index).subscribe(a=>{e.store=a})})()}selectUser(e,a){var o=this;return(0,c.Z)(function*(){o.activeChatUUID=a;const s=yield o.chatsService.getChatMessages(a);null!==s.active_chatter.id&&(o.activeChatterInOpenChat=s.active_chatter.id),o.soldImages=s.sold_content,o.unsoldImages=s.not_sold_content,o.checkActiveChatter(o.activeChatterInOpenChat),o.chatMessages=s.messages,o.selectedUser=e,o.isShowUserChat=!0,o.scrollToBottom()})()}isBase64String(e){return"string"==typeof e&&this.base64Regex.test(e)}getBase64ImageSrc(e){return`data:image/png;base64,${e}`}isImageMessage(e){return this.isBase64String(e)}sendChatMessage(e){e.trim()&&(this.chatsService.postMessage(this.activeChatUUID,e),this.chatMessages.push({message:e,send_by_us:!0,sender_unknown:!1,created_at:(new Date).toISOString()}),this.textMessage="",this.scrollToBottom())}startFetchingData(){var e=this;this.intervalId||(this.intervalId=setInterval((0,c.Z)(function*(){e.chatsService.getChats().then(o=>{e.userChats=o,o.forEach(s=>{e.checkInActiveChatterTime(s)}),e.updatedChatsToShow(),0===e.userChatsFiltered.length&&(e.selectedUser=null,e.isShowUserChat=!1,e.activeChatUUID="",e.chatMessages=[])}),""!==e.activeChatUUID&&(yield e.selectUser(e.selectedUser,e.activeChatUUID))}),15e3))}scrollToBottom(){this.isShowUserChat&&setTimeout(()=>{this.scrollable.scrollTo({bottom:0})})}updatedChatsToShow(){this.userChatsFiltered=this.userChats.filter(e=>this.selectedModels.includes(e.model.id))}postContentModal(e,a){var o=this;return(0,c.Z)(function*(){o.content=yield o.chatsService.getContent(e,a),o.modalService.open("post-content"),o.isModalOpen=!0})()}viewNotesModal(){var e=this;return(0,c.Z)(function*(){e.modalService.open("view-notes"),e.isModalOpen=!0})()}checkActiveChatter(e){var a=this;return(0,c.Z)(function*(){return(e===localStorage.getItem("userTag")||null!==e)&&(a.isActiveChatter=!0),a.isActiveChatter})()}checkInActiveChatterTime(e){return(0,c.Z)(function*(){if(e)if(null===e.active_chatter.id){const a=new Date(e.updated_at).getTime(),s=new Date(e.current_time).getTime()-a;e.inactiveChatDuration!==u.V.Long&&(e.inactiveChatDuration!==u.V.Short&&(e.inactiveChatDuration=u.V.Short),s>3e4&&(e.inactiveChatDuration=u.V.Medium),s>12e4&&(e.inactiveChatDuration=u.V.Long))}else e.inactiveChatTimeStamp=0,e.inactiveChatDuration=u.V.Active})()}makeSaleEvent(){var e=this;return(0,c.Z)(function*(){e.sendChatMessage("CONTENT_SENT")})()}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(M.yh),t.Y36(v.R),t.Y36(C.Z))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(a,o){if(1&a&&t.Gf(L,5),2&a){let s;t.iGM(s=t.CRH())&&(o.scrollable=s.first)}},decls:24,vars:25,consts:[[1,"relative","flex","h-full","gap-5","sm:h-[calc(100vh_-_150px)]","sm:min-h-0",3,"ngClass"],[1,"panel","absolute","z-10","hidden","h-full","w-full","max-w-xs","flex-none","flex-col","space-y-4","overflow-hidden","p-4","xl:relative","xl:flex",3,"ngClass"],["routerLink","/dashboard/snipe-view"],[1,"flex","items-center"],[1,"shrink-0","group-hover:!text-primary"],[1,"text-black","ltr:pl-3","rtl:pr-3","dark:text-[#506690]","dark:group-hover:text-white-dark"],[4,"ngIf"],[1,"h-px","w-full","border-b","border-[#e0e6ed]","dark:border-[#1b2e4b]"],[1,"!mt-0","flex-grow"],["appearance","compact",1,"chat-users","relative","h-full","min-h-[100px]","space-y-0.5","ltr:-mr-3","rtl:-ml-3","sm:h-[calc(100vh_-_357px)]"],[4,"ngFor","ngForOf"],[1,"absolute","z-[5]","hidden","h-full","w-full","rounded-md","bg-black/60",3,"ngClass","click"],[1,"panel","flex-1","p-0"],[1,"custom-multiselect",3,"ngModel","hideSelected","multiple","ngModelChange","add","remove","clear"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","button",1,"flex","w-full","items-center","justify-between","rounded-md","p-2","hover:bg-gray-100","hover:text-primary","dark:hover:bg-[#050b14]","dark:hover:text-primary",3,"ngClass","click"],[1,"flex-1"],[1,"relative","flex-shrink-0"],[1,"h-12","w-12","rounded-full","object-cover",3,"src"],[1,"mx-3","ltr:text-left","rtl:text-right"],[1,"mb-1","font-semibold"],[1,"max-w-[185px]","truncate","text-xs","text-white-dark"],["class","relative inline-flex h-[6px] w-[6px] rounded-full bg-success",4,"ngIf"],["class","relative inline-flex h-[6px] w-[6px] rounded-full bg-yellow-300",4,"ngIf"],["class","relative inline-flex h-[6px] w-[6px] rounded-full bg-warning",4,"ngIf"],["class","relative inline-flex top-0 h-3 w-3 ltr:right-0 rtl:left-0",4,"ngIf"],[1,"whitespace-nowrap","text-xs","font-semibold"],[1,"relative","inline-flex","h-[6px]","w-[6px]","rounded-full","bg-success"],[1,"relative","inline-flex","h-[6px]","w-[6px]","rounded-full","bg-yellow-300"],[1,"relative","inline-flex","h-[6px]","w-[6px]","rounded-full","bg-warning"],[1,"relative","inline-flex","top-0","h-3","w-3","ltr:right-0","rtl:left-0"],[1,"absolute","-top-[3px]","inline-flex","h-full","w-full","animate-ping","rounded-full","bg-danger/50","opacity-75","ltr:-left-[3px]","rtl:-right-[3px]"],[1,"relative","inline-flex","h-[6px]","w-[6px]","rounded-full","bg-danger"],[1,"relative","flex","h-full","items-center","justify-center","p-4"],["type","button",1,"absolute","top-4","hover:text-primary","ltr:left-4","rtl:right-4","xl:hidden",3,"click"],[1,"flex","flex-col","items-center","justify-center","py-8"],[1,"mb-8","h-[calc(100vh_-_320px)]","min-h-[120px]","w-[280px]","text-white","dark:text-[#0e1726]","md:w-[430px]"],["xmlns","http://www.w3.org/2000/svg","data-name","Layer 1","viewBox","0 0 891.29496 745.19434",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"h-full","w-full"],["cx","418.64354","cy","727.19434","rx","352","ry","18",1,"fill-[#e6e6e6]","dark:fill-[#888ea8]"],["d","M778.64963,250.35008h-3.99878V140.80476a63.40187,63.40187,0,0,0-63.4018-63.40193H479.16232a63.40188,63.40188,0,0,0-63.402,63.4017v600.9744a63.40189,63.40189,0,0,0,63.4018,63.40192H711.24875a63.40187,63.40187,0,0,0,63.402-63.40168V328.32632h3.99878Z","transform","translate(-154.35252 -77.40283)","fill","#3f3d56"],["d","M761.156,141.24713v600.09a47.35072,47.35072,0,0,1-47.35,47.35h-233.2a47.35084,47.35084,0,0,1-47.35-47.35v-600.09a47.3509,47.3509,0,0,1,47.35-47.35h28.29a22.50659,22.50659,0,0,0,20.83,30.99h132.96a22.50672,22.50672,0,0,0,20.83-30.99h30.29A47.35088,47.35088,0,0,1,761.156,141.24713Z","transform","translate(-154.35252 -77.40283)","fill","currentColor"],["d","M686.03027,400.0032q-2.32543,1.215-4.73047,2.3-2.18994.99-4.4497,1.86c-.5503.21-1.10987.42-1.66992.63a89.52811,89.52811,0,0,1-13.6001,3.75q-3.43506.675-6.96,1.06-2.90991.33-5.87989.47c-1.41015.07-2.82031.1-4.24023.1a89.84124,89.84124,0,0,1-16.75977-1.57c-1.44043-.26-2.85009-.57-4.26025-.91a88.77786,88.77786,0,0,1-19.66992-7.26c-.56006-.28-1.12012-.58-1.68018-.87-.83008-.44-1.63965-.9-2.4497-1.38.38964-.54.81005-1.07,1.23974-1.59a53.03414,53.03414,0,0,1,78.87012-4.1,54.27663,54.27663,0,0,1,5.06006,5.86C685.25977,398.89316,685.6499,399.44321,686.03027,400.0032Z","transform","translate(-154.35252 -77.40283)","fill","#6c63ff"],["cx","492.14325","cy","234.76352","r","43.90974","fill","#2f2e41"],["cx","642.49883","cy","327.46205","r","32.68086","transform","translate(-232.6876 270.90663) rotate(-28.66315)","fill","#a0616a"],["d","M676.8388,306.90589a44.44844,44.44844,0,0,1-25.402,7.85033,27.23846,27.23846,0,0,0,10.796,4.44154,89.62764,89.62764,0,0,1-36.61.20571,23.69448,23.69448,0,0,1-7.66395-2.63224,9.699,9.699,0,0,1-4.73055-6.3266c-.80322-4.58859,2.77227-8.75743,6.488-11.567a47.85811,47.85811,0,0,1,40.21662-8.03639c4.49246,1.16124,8.99288,3.12327,11.91085,6.731s3.78232,9.16981,1.00224,12.88488Z","transform","translate(-154.35252 -77.40283)","fill","#2f2e41"],["d","M644.5,230.17319a89.98675,89.98675,0,0,0-46.83984,166.83l.58007.34q.72.43506,1.43995.84c.81005.48,1.61962.94,2.4497,1.38.56006.29,1.12012.59,1.68018.87a88.77786,88.77786,0,0,0,19.66992,7.26c1.41016.34,2.81982.65,4.26025.91a89.84124,89.84124,0,0,0,16.75977,1.57c1.41992,0,2.83008-.03,4.24023-.1q2.97-.135,5.87989-.47,3.52513-.39,6.96-1.06a89.52811,89.52811,0,0,0,13.6001-3.75c.56005-.21,1.11962-.42,1.66992-.63q2.26464-.87,4.4497-1.86,2.40015-1.08,4.73047-2.3a90.7919,90.7919,0,0,0,37.03955-35.97c.04-.07995.09034-.16.13038-.24a89.30592,89.30592,0,0,0,9.6499-26.41,90.051,90.051,0,0,0-88.3501-107.21Zm77.06006,132.45c-.08008.14-.1499.28-.23.41a88.17195,88.17195,0,0,1-36.48,35.32q-2.29542,1.2-4.66992,2.25c-1.31006.59-2.64991,1.15-4,1.67-.57032.22-1.14991.44-1.73.64a85.72126,85.72126,0,0,1-11.73,3.36,84.69473,84.69473,0,0,1-8.95019,1.41c-1.8501.2-3.73.34-5.62012.41-1.21.05-2.42969.08-3.6499.08a86.762,86.762,0,0,1-16.21973-1.51,85.62478,85.62478,0,0,1-9.63037-2.36,88.46592,88.46592,0,0,1-13.98974-5.67c-.52-.27-1.04-.54-1.5503-.82-.73-.39-1.46972-.79-2.18994-1.22-.54-.3-1.08008-.62-1.60986-.94-.31006-.18-.62012-.37-.93018-.56a88.06851,88.06851,0,1,1,123.18018-32.47Z","transform","translate(-154.35252 -77.40283)","fill","#3f3d56"],["d","M624.2595,268.86254c-.47244-4.968-6.55849-8.02647-11.3179-6.52583s-7.88411,6.2929-8.82863,11.19308a16.0571,16.0571,0,0,0,2.16528,12.12236c2.40572,3.46228,6.82664,5.623,10.95,4.74406,4.70707-1.00334,7.96817-5.59956,8.90127-10.32105s.00667-9.58929-.91854-14.31234Z","transform","translate(-154.35252 -77.40283)","fill","#2f2e41"],["d","M691.24187,275.95964c-.47245-4.968-6.5585-8.02646-11.3179-6.52582s-7.88412,6.29289-8.82864,11.19307a16.05711,16.05711,0,0,0,2.16529,12.12236c2.40571,3.46228,6.82663,5.623,10.95,4.74406,4.70707-1.00334,7.96817-5.59955,8.90127-10.32105s.00667-9.58929-.91853-14.31234Z","transform","translate(-154.35252 -77.40283)","fill","#2f2e41"],["d","M488.93638,356.14169a4.47525,4.47525,0,0,1-3.30664-1.46436L436.00767,300.544a6.02039,6.02039,0,0,0-4.42627-1.94727H169.3618a15.02615,15.02615,0,0,1-15.00928-15.00927V189.025a15.02615,15.02615,0,0,1,15.00928-15.00928H509.087A15.02615,15.02615,0,0,1,524.0963,189.025v94.5625A15.02615,15.02615,0,0,1,509.087,298.59676h-9.63135a6.01157,6.01157,0,0,0-6.00464,6.00489v47.0332a4.474,4.474,0,0,1-2.87011,4.1958A4.52563,4.52563,0,0,1,488.93638,356.14169Z","transform","translate(-154.35252 -77.40283)","fill","currentColor"],["d","M488.93638,356.14169a4.47525,4.47525,0,0,1-3.30664-1.46436L436.00767,300.544a6.02039,6.02039,0,0,0-4.42627-1.94727H169.3618a15.02615,15.02615,0,0,1-15.00928-15.00927V189.025a15.02615,15.02615,0,0,1,15.00928-15.00928H509.087A15.02615,15.02615,0,0,1,524.0963,189.025v94.5625A15.02615,15.02615,0,0,1,509.087,298.59676h-9.63135a6.01157,6.01157,0,0,0-6.00464,6.00489v47.0332a4.474,4.474,0,0,1-2.87011,4.1958A4.52563,4.52563,0,0,1,488.93638,356.14169ZM169.3618,176.01571A13.024,13.024,0,0,0,156.35252,189.025v94.5625a13.024,13.024,0,0,0,13.00928,13.00927H431.5814a8.02436,8.02436,0,0,1,5.90039,2.59571l49.62208,54.1333a2.50253,2.50253,0,0,0,4.34716-1.69092v-47.0332a8.0137,8.0137,0,0,1,8.00464-8.00489H509.087a13.024,13.024,0,0,0,13.00928-13.00927V189.025A13.024,13.024,0,0,0,509.087,176.01571Z","transform","translate(-154.35252 -77.40283)","fill","#3f3d56"],["cx","36.81601","cy","125.19345","r","13.13371","fill","#6c63ff"],["d","M493.76439,275.26947H184.68447a7.00465,7.00465,0,1,1,0-14.00929H493.76439a7.00465,7.00465,0,0,1,0,14.00929Z","transform","translate(-154.35252 -77.40283)",1,"fill-[#e6e6e6]","dark:fill-[#888ea8]"],["d","M393.07263,245.49973H184.68447a7.00465,7.00465,0,1,1,0-14.00929H393.07263a7.00464,7.00464,0,0,1,0,14.00929Z","transform","translate(-154.35252 -77.40283)",1,"fill-[#e6e6e6]","dark:fill-[#888ea8]"],["d","M709.41908,676.83065a4.474,4.474,0,0,1-2.87011-4.1958v-47.0332a6.01157,6.01157,0,0,0-6.00464-6.00489H690.913a15.02615,15.02615,0,0,1-15.00928-15.00927V510.025A15.02615,15.02615,0,0,1,690.913,495.01571H1030.6382a15.02615,15.02615,0,0,1,15.00928,15.00928v94.5625a15.02615,15.02615,0,0,1-15.00928,15.00927H768.4186a6.02039,6.02039,0,0,0-4.42627,1.94727l-49.62207,54.1333a4.47525,4.47525,0,0,1-3.30664,1.46436A4.52563,4.52563,0,0,1,709.41908,676.83065Z","transform","translate(-154.35252 -77.40283)","fill","currentColor"],["d","M709.41908,676.83065a4.474,4.474,0,0,1-2.87011-4.1958v-47.0332a6.01157,6.01157,0,0,0-6.00464-6.00489H690.913a15.02615,15.02615,0,0,1-15.00928-15.00927V510.025A15.02615,15.02615,0,0,1,690.913,495.01571H1030.6382a15.02615,15.02615,0,0,1,15.00928,15.00928v94.5625a15.02615,15.02615,0,0,1-15.00928,15.00927H768.4186a6.02039,6.02039,0,0,0-4.42627,1.94727l-49.62207,54.1333a4.47525,4.47525,0,0,1-3.30664,1.46436A4.52563,4.52563,0,0,1,709.41908,676.83065ZM690.913,497.01571A13.024,13.024,0,0,0,677.9037,510.025v94.5625A13.024,13.024,0,0,0,690.913,617.59676h9.63135a8.0137,8.0137,0,0,1,8.00464,8.00489v47.0332a2.50253,2.50253,0,0,0,4.34716,1.69092l49.62208-54.1333a8.02436,8.02436,0,0,1,5.90039-2.59571h262.2196a13.024,13.024,0,0,0,13.00928-13.00927V510.025a13.024,13.024,0,0,0-13.00928-13.00928Z","transform","translate(-154.35252 -77.40283)","fill","#3f3d56"],["d","M603.53027,706.11319a89.06853,89.06853,0,0,1-93.65039,1.49,54.12885,54.12885,0,0,1,9.40039-12.65,53.43288,53.43288,0,0,1,83.90967,10.56994C603.2998,705.71316,603.41992,705.91318,603.53027,706.11319Z","transform","translate(-154.35252 -77.40283)","fill","#6c63ff"],["cx","398.44256","cy","536.68841","r","44.20157","fill","#2f2e41"],["cx","556.81859","cy","629.4886","r","32.89806","transform","translate(-416.96496 738.72884) rotate(-61.33685)","fill","#ffb8b8"],["d","M522.25039,608.79582a44.74387,44.74387,0,0,0,25.57085,7.9025,27.41946,27.41946,0,0,1-10.8677,4.47107,90.22316,90.22316,0,0,0,36.85334.20707,23.852,23.852,0,0,0,7.71488-2.64973,9.76352,9.76352,0,0,0,4.762-6.36865c.80855-4.61909-2.7907-8.81563-6.53113-11.64387a48.17616,48.17616,0,0,0-40.4839-8.08981c-4.52231,1.169-9.05265,3.144-11.99,6.77579s-3.80746,9.23076-1.0089,12.97052Z","transform","translate(-154.35252 -77.40283)","fill","#2f2e41"],["d","M555.5,721.17319a89.97205,89.97205,0,1,1,48.5708-14.21875A89.87958,89.87958,0,0,1,555.5,721.17319Zm0-178a88.00832,88.00832,0,1,0,88,88A88.09957,88.09957,0,0,0,555.5,543.17319Z","transform","translate(-154.35252 -77.40283)","fill","#3f3d56"],["cx","563.81601","cy","445.19345","r","13.13371","fill","#6c63ff"],["d","M1020.76439,595.26947H711.68447a7.00465,7.00465,0,1,1,0-14.00929h309.07992a7.00464,7.00464,0,0,1,0,14.00929Z","transform","translate(-154.35252 -77.40283)",1,"fill-[#e6e6e6]","dark:fill-[#888ea8]"],["d","M920.07263,565.49973H711.68447a7.00465,7.00465,0,1,1,0-14.00929H920.07263a7.00465,7.00465,0,0,1,0,14.00929Z","transform","translate(-154.35252 -77.40283)",1,"fill-[#e6e6e6]","dark:fill-[#888ea8]"],["cx","554.64354","cy","605.66091","rx","24.50394","ry","2.71961",1,"fill-[#e6e6e6]","dark:fill-[#888ea8]"],["cx","335.64354","cy","285.66091","rx","24.50394","ry","2.71961",1,"fill-[#e6e6e6]","dark:fill-[#888ea8]"],[1,"mx-auto","flex","max-w-[190px]","justify-center","rounded-md","bg-white-dark/20","p-2","font-semibold"],[1,"ltr:mr-2","rtl:ml-2"],[1,"relative","h-full","pb-[68px]"],[1,"flex","items-center","justify-between","p-4"],[1,"flex","items-center","space-x-2","rtl:space-x-reverse"],["type","button",1,"hover:text-primary","xl:hidden",3,"click"],[1,"relative","flex-none"],[1,"h-10","w-10","rounded-full","object-cover","sm:h-12","sm:w-12",3,"src"],[1,"absolute","bottom-0","ltr:right-0","rtl:left-0"],[1,"h-4","w-4","rounded-full","bg-success"],[1,"mx-3"],[1,"font-semibold"],["type","button",1,"rounded-md","bg-[#f4f4f4]","p-2","hover:bg-primary-light","hover:text-primary","dark:bg-[#1b2e4b]",3,"click"],["visibility","native",1,"chat-conversation-box","relative","!h-[calc(100vh_-_289px)]","min-h-[300px]","sm:!h-[calc(100vh_-_300px)]"],["scrollable",""],[1,"space-y-5","p-4"],[1,"m-6","mt-0","block"],[1,"relative","border-b","border-[#f4f4f4]","text-center","text-xs","dark:border-gray-800"],[1,"relative","top-2","bg-white","px-3","dark:bg-[#0e1726]"],["class","absolute bottom-0 left-0 w-full p-4",4,"ngIf"],[1,"flex","items-start","gap-3",3,"ngClass"],[1,"flex-none",3,"ngClass"],[1,"space-y-2"],[1,"flex","items-center","gap-3"],[1,"rounded-md","bg-black/10","p-4","py-2","dark:bg-gray-800",3,"ngClass"],[4,"ngIf","ngIfElse"],["textMessage",""],[1,"text-xs","text-white-dark",3,"ngClass"],[1,"h-10","w-10","rounded-full","object-cover",3,"src"],["alt","Base64 Image",1,"max-w-xs",3,"src"],[1,"absolute","bottom-0","left-0","w-full","p-4"],[1,"w-full","items-center","space-x-3","rtl:space-x-reverse","sm:flex"],[1,"relative","flex-1"],["placeholder","Type a message","name","textMessage",1,"form-input","rounded-full","border-0","bg-[#f4f4f4]","px-12","py-2","focus:outline-none",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"absolute","top-1/2","-translate-y-1/2","hover:text-primary","ltr:left-4","rtl:right-4"],["type","button",1,"absolute","top-1/2","-translate-y-1/2","hover:text-primary","ltr:right-4","rtl:left-4",3,"click"],[1,"hidden","items-center","space-x-3","py-3","rtl:space-x-reverse","sm:block","sm:py-0"],["type","button",1,"rounded-md","bg-[#f4f4f4]","p-2","hover:bg-primary-light","hover:text-primary","dark:bg-[#1b2e4b]"],[1,"opacity-70"],[3,"chatUUID","content","contentSalesInformationUnSold","contentSalesInformation","madeSale",4,"ngIf"],[3,"chatUUID","content","contentSalesInformationUnSold","contentSalesInformation","madeSale"]],template:function(a,o){1&a&&(t.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"a",2)(4,"div",3),t._UZ(5,"icon-menu-chat",4),t.TgZ(6,"span",5),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t.YNc(9,O,3,4,"ng-container",6),t._UZ(10,"div",7),t.TgZ(11,"div",8)(12,"ng-scrollbar",9),t.YNc(13,V,22,15,"ng-container",10),t.qZA()()(),t.TgZ(14,"div",11),t.NdJ("click",function(){return o.isShowChatMenu=!o.isShowChatMenu}),t.qZA(),t.TgZ(15,"div",12),t.YNc(16,B,37,0,"ng-container",6),t.YNc(17,W,28,10,"ng-container",6),t.qZA()()(),t.YNc(18,et,2,1,"ng-container",6),t.ALo(19,"async"),t.YNc(20,at,2,1,"ng-container",6),t.ALo(21,"async"),t.YNc(22,it,2,1,"ng-container",6),t.ALo(23,"async")),2&a&&(t.xp6(1),t.Q6J("ngClass",t.VKq(19,st,o.isShowChatMenu)),t.xp6(1),t.Q6J("ngClass",t.VKq(21,lt,o.isShowChatMenu)),t.xp6(5),t.Oqu(t.lcZ(8,11,"snipe")),t.xp6(2),t.Q6J("ngIf",0!==o.models.length),t.xp6(4),t.Q6J("ngForOf",o.userChatsFiltered),t.xp6(1),t.Q6J("ngClass",t.VKq(23,rt,o.isShowChatMenu)),t.xp6(2),t.Q6J("ngIf",!o.isShowUserChat),t.xp6(1),t.Q6J("ngIf",o.isShowUserChat&&o.selectedUser),t.xp6(1),t.Q6J("ngIf",t.lcZ(19,13,o.modalService.isOpen$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(21,15,o.modalService.isOpen$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(23,17,o.modalService.isOpen$)))},encapsulation:2,data:{animation:[(0,d.X$)("toggleAnimation",[(0,d.eR)(":enter",[(0,d.oB)({opacity:0,transform:"scale(0.95)"}),(0,d.jt)("100ms ease-out",(0,d.oB)({opacity:1,transform:"scale(1)"}))]),(0,d.eR)(":leave",[(0,d.jt)("75ms",(0,d.oB)({opacity:0,transform:"scale(0.95)"}))])])]}})}return n})();var ct=l(8386),dt=l(1694);function pt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"currency"),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.lnq("",t.lcZ(3,3,"sales_count"),": ",e.salesInformation.total_sales," - ",t.lcZ(4,5,e.salesInformation.average_price)," (AVG)")}}function ht(n,i){1&n&&(t._UZ(0,"span"),t._uU(1),t.ALo(2,"translate")),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"no_sales")," "))}function ut(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"currency"),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.lnq("",t.lcZ(3,3,"sales_count"),": ",e.unsoldSalesInformation.total_sales," - ",t.lcZ(4,5,e.unsoldSalesInformation.average_price)," (AVG)")}}function mt(n,i){1&n&&(t._UZ(0,"span"),t._uU(1),t.ALo(2,"translate")),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"no_sales")," "))}function _t(n,i){1&n&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",31),t._UZ(2,"path",32)(3,"path",33),t.qZA(),t.BQk())}function ft(n,i){1&n&&(t.O4$(),t.TgZ(0,"svg",31),t._UZ(1,"circle",34)(2,"path",35)(3,"path",36),t.qZA())}function gt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.toggleSelection(o))}),t._uU(1,"Select"),t.qZA()}}function xt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.toggleSelection(o))}),t._uU(1,"Deselect"),t.qZA()}}function vt(n,i){if(1&n&&(t.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),t._UZ(4,"img",18),t.qZA(),t.TgZ(5,"h5",19),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"p",20),t.YNc(9,pt,5,7,"ng-container",21),t.YNc(10,ht,3,3,"ng-template",null,22,t.W1O),t.qZA(),t.TgZ(12,"h5",19),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"p",20),t.YNc(16,ut,5,7,"ng-container",21),t.YNc(17,mt,3,3,"ng-template",null,23,t.W1O),t.qZA(),t.TgZ(19,"div",24)(20,"div",25)(21,"div",26),t.YNc(22,_t,4,0,"ng-container",21),t.YNc(23,ft,4,0,"ng-template",null,27,t.W1O),t.qZA()(),t.TgZ(25,"div",28),t.YNc(26,gt,2,0,"button",29),t.YNc(27,xt,2,0,"ng-template",null,30,t.W1O),t.qZA()()()()()),2&n){const e=i.$implicit,a=t.MAs(11),o=t.MAs(18),s=t.MAs(24),h=t.MAs(28),_=t.oxw();t.xp6(4),t.s9C("src",e.url,t.LSH),t.s9C("alt",e.tag),t.xp6(2),t.hij(" ",t.lcZ(7,12,"confirmed_sales"),""),t.xp6(3),t.Q6J("ngIf",e.salesInformation)("ngIfElse",a),t.xp6(4),t.Oqu(t.lcZ(14,14,"unconfirmed_sales")),t.xp6(3),t.Q6J("ngIf",e.unsoldSalesInformation)("ngIfElse",o),t.xp6(6),t.Q6J("ngIf","video"===e.content_type)("ngIfElse",s),t.xp6(4),t.Q6J("ngIf",!_.isSelected(e))("ngIfElse",h)}}let Ct=(()=>{class n{constructor(e,a,o){this.modalService=e,this.chatsService=a,this.notificationService=o,this.madeSale=new t.vpe,this.selectedContent=[],this.priceValue=0,this.submitState=!1}toggleSelection(e){if(e.selected=!e.selected,e.selected)this.selectedContent.push(e);else{const a=this.selectedContent.findIndex(o=>o.url===e.url);-1!==a&&this.selectedContent.splice(a,1)}}submit(){var e=this;return(0,c.Z)(function*(){e.submitState=!0,null!==e.priceValue&&(e.priceValue>=5&&e.priceValue<=2500&&e.selectedContent.length>0||0===e.priceValue)?(yield e.chatsService.makeSale(e.chatUUID,e.priceValue,e.selectedContent),e.madeSale.emit(!0),e.closeModal()):(e.notificationService.showErrorToast("Unaccepted price","The price should either be 0 or between 5 and 2500."),e.submitState=!1)})()}isSelected(e){return e.selected}closeModal(){this.modalService.close("post-content")}ngOnInit(){this.content.forEach(e=>{e.salesInformation=this.contentSalesInformation.find(a=>a.content_id===e.public_id),e.unsoldSalesInformation=this.contentSalesInformationUnSold.find(a=>a.content_id===e.public_id)})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(C.Z),t.Y36(v.R),t.Y36(dt.g))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["post-content-modal"]],inputs:{contentSalesInformation:"contentSalesInformation",contentSalesInformationUnSold:"contentSalesInformationUnSold",content:"content",chatUUID:"chatUUID"},outputs:{madeSale:"madeSale"},decls:20,vars:12,consts:[["xmlns","http://www.w3.org/1999/html",1,"animate","animate-fade-in"],["role","dialog","tabindex","-1",1,"modal","fade","ng-star-inserted","in"],[1,"modal-dialog","content"],[1,"modal-content"],[1,"modal-header"],[1,"ng-star-inserted"],["data-dismiss","modal","type","button","aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[1,"h-full","min-h-[500px]","space-y-0.5","ltr:-mr-3","rtl:-ml-3"],[1,"grid","grid-cols-3","gap-4","grid-flow-row","auto-rows-max","sm-grid-cols-1","md-grid-cols-2"],["class","relative cursor-pointer",4,"ngFor","ngForOf"],[1,"modal-footer","flex","flex-row","justify-between"],["type","number","min","0",1,"form-input",3,"placeholder","ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","ltr:ml-4","rtl:mr-4","ng-star-inserted",3,"disabled","click"],[1,"relative","cursor-pointer"],[1,"max-w-[22rem]","w-full","bg-white","shadow-[4px_6px_10px_-3px_#bfc9d4]","rounded","border","border-[#e0e6ed]","dark:border-[#1b2e4b]","dark:bg-[#191e3a]","dark:shadow-none"],[1,"py-7","px-6"],[1,"-mt-7","mb-7","-mx-6","rounded-tl","rounded-tr","h-[215px]","overflow-hidden"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"text-[#3b3f5c]","text-[15px]","font-bold","dark:text-white-light"],[1,"text-white-dark"],[4,"ngIf","ngIfElse"],["noSales",""],["noSalesU",""],[1,"mt-6","relative","flex","justify-between"],[1,"flex","font-semibold"],[1,"text-primary","flex","items-center"],["photo",""],[1,"flex","items-center","font-semibold"],["type","button","class","btn btn-primary",3,"click",4,"ngIf","ngIfElse"],["noselection",""],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg","ng-reflect-ng-class","h-6 w-6",1,"h-6","w-6","ng-star-inserted"],["d","M2 11.5C2 8.21252 2 6.56878 2.90796 5.46243C3.07418 5.25989 3.25989 5.07418 3.46243 4.90796C4.56878 4 6.21252 4 9.5 4C12.7875 4 14.4312 4 15.5376 4.90796C15.7401 5.07418 15.9258 5.25989 16.092 5.46243C17 6.56878 17 8.21252 17 11.5V12.5C17 15.7875 17 17.4312 16.092 18.5376C15.9258 18.7401 15.7401 18.9258 15.5376 19.092C14.4312 20 12.7875 20 9.5 20C6.21252 20 4.56878 20 3.46243 19.092C3.25989 18.9258 3.07418 18.7401 2.90796 18.5376C2 17.4312 2 15.7875 2 12.5V11.5Z","stroke","currentColor","stroke-width","1.5"],["opacity","0.5","d","M17 9.50019L17.6584 9.17101C19.6042 8.19807 20.5772 7.7116 21.2886 8.15127C22 8.59094 22 9.67872 22 11.8543V12.1461C22 14.3217 22 15.4094 21.2886 15.8491C20.5772 16.2888 19.6042 15.8023 17.6584 14.8294L17 14.5002V9.50019Z","stroke","currentColor","stroke-width","1.5"],["cx","12","cy","13","r","3","stroke","currentColor","stroke-width","1.5"],["opacity","0.5","d","M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z","stroke","currentColor","stroke-width","1.5"],["d","M19 10H18","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return o.closeModal()}),t._uU(9,"\xd7"),t.qZA()(),t.TgZ(10,"div",7)(11,"ng-scrollbar",8)(12,"div",9),t.YNc(13,vt,29,16,"div",10),t.qZA()()(),t.TgZ(14,"div",11)(15,"input",12),t.NdJ("ngModelChange",function(h){return o.priceValue=h}),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"button",13),t.NdJ("click",function(){return o.submit()}),t._uU(18),t.ALo(19,"translate"),t.qZA()()()()()()),2&a&&(t.xp6(6),t.Oqu(t.lcZ(7,6,"select_content")),t.xp6(7),t.Q6J("ngForOf",o.content),t.xp6(2),t.s9C("placeholder",t.lcZ(16,8,"price")),t.Q6J("ngModel",o.priceValue),t.xp6(2),t.Q6J("disabled",o.priceValue<=0||0===o.selectedContent.length||o.submitState),t.xp6(1),t.hij(" ",t.lcZ(19,10,"add_content"),""))},dependencies:[r.sg,r.O5,p.Fj,p.wV,p.JJ,p.qQ,p.On,f.KC,r.H9,g.X$],styles:[".modal[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;min-height:100%}.modal.in[_ngcontent-%COMP%]{opacity:1}.content[_ngcontent-%COMP%]{max-width:56rem}@media screen and (max-width: 639px){.sm-grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media screen and (max-width: 1279px){.md-grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media screen and (min-width: 1279px){.content-new[_ngcontent-%COMP%]{max-width:80rem}}"]})}return n})();var T=l(9051);function Zt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.updateYear(2024))}),t._uU(1,"2024"),t.qZA()}}function wt(n,i){1&n&&(t.TgZ(0,"ul",28)(1,"li"),t.YNc(2,Zt,2,0,"a",29),t.qZA()()),2&n&&t.Q6J("@toggleAnimation",void 0)}function bt(n,i){if(1&n&&(t.TgZ(0,"div")(1,"div",31)(2,"div",32)(3,"p",33),t._uU(4),t.qZA(),t.TgZ(5,"div",34)(6,"div",35)(7,"p",36),t._uU(8),t.ALo(9,"date"),t.qZA()()()()()()),2&n){const e=i.$implicit;t.xp6(4),t.Oqu(e.note),t.xp6(4),t.Oqu(t.xi3(9,2,e.created_at,"dd-MM-yyyy"))}}function yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"h5",12),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",13)(9,"div",14)(10,"a",15),t._UZ(11,"icon-horizontal-dots",16),t.qZA(),t.YNc(12,wt,3,1,"ul",17),t.qZA()()(),t.TgZ(13,"div",18)(14,"h5",19),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",20)(18,"apx-chart",21)(19,"div",22),t._UZ(20,"span",23),t.qZA()()()(),t.TgZ(21,"div",24)(22,"div",18)(23,"h5",19),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"ng-scrollbar"),t.YNc(27,bt,10,5,"div",25),t.qZA()()()(),t.TgZ(28,"div",26)(29,"button",27),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addNewNote())}),t._uU(30),t.ALo(31,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(6),t.AsE("",t.lcZ(7,15,"analytics_panel_header")," ",e.selectedYear,""),t.xp6(9),t.Oqu(t.lcZ(16,17,"sales_by_category_pane_title")),t.xp6(3),t.Q6J("series",e.salesByCategory.series)("chart",e.salesByCategory.chart)("dataLabels",e.salesByCategory.dataLabels)("stroke",e.salesByCategory.stroke)("colors",e.salesByCategory.colors)("legend",e.salesByCategory.legend)("plotOptions",e.salesByCategory.plotOptions)("labels",e.salesByCategory.labels)("states",e.salesByCategory.states),t.xp6(6),t.Oqu(t.lcZ(25,19,"notes_title")),t.xp6(3),t.Q6J("ngForOf",e.notes),t.xp6(3),t.Oqu(t.lcZ(31,21,"add_note_button"))}}function Mt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",37)(3,"form")(4,"label",38),t._uU(5,"Note"),t.qZA(),t._UZ(6,"textarea",39,40),t.qZA()()(),t.TgZ(8,"div",26)(9,"button",27),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(7),s=t.oxw();return t.KtG(s.postNote(o.value))}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.cancel())}),t._uU(13),t.ALo(14,"translate"),t.qZA()()()}2&n&&(t.xp6(10),t.Oqu(t.lcZ(11,2,"submit")),t.xp6(3),t.Oqu(t.lcZ(14,4,"cancel_button")))}let Tt=(()=>{class n{constructor(e,a,o,s,h){this.modalService=e,this.chatComponent=a,this.chatsService=o,this.storeData=s,this.datePipe=h,this.addNote=!1,this.notes=[],this.activeChatUUID="",this.activeChatUUID=a.activeChatUUID,this.selectedYear=(new Date).getFullYear(),this.initStore()}ngOnInit(){var e=this;return(0,c.Z)(function*(){yield e.initInsights(e.selectedYear),setTimeout((0,c.Z)(function*(){yield e.initInsights(e.selectedYear)}),6e5)})()}initStore(){var e=this;return(0,c.Z)(function*(){e.storeData.select(a=>a.index).subscribe(a=>{e.store=a})})()}getNotes(e){var a=this;return(0,c.Z)(function*(){a.notes=yield a.chatsService.getNotes(e)})()}addNewNote(){var e=this;return(0,c.Z)(function*(){e.addNote=!0})()}cancel(){var e=this;return(0,c.Z)(function*(){e.addNote=!1})()}postNote(e){var a=this;return(0,c.Z)(function*(){yield a.chatsService.postNote(e,a.activeChatUUID);const o={id:"",note:e,created_at:(new Date).toISOString()};a.notes.unshift(o),a.addNote=!1})()}closeModal(){this.modalService.close("view-notes")}initInsights(e){var a=this;return(0,c.Z)(function*(){const o="dark"===a.store.theme||a.store.isDarkMode,s=yield a.chatsService.getChatInsights(a.activeChatUUID,e);a.notes=s[0],console.log(a.notes);const h=s[1][0];a.salesByCategory={chart:{type:"donut",height:460,fontFamily:"Nunito, sans-serif"},dataLabels:{enabled:!1},stroke:{show:!0,width:25,colors:o?"#0e1726":"#fff"},colors:o?["#5c1ac3","#e2a03f","#e7515a","#e2a03f"]:["#e2a03f","#5c1ac3","#e7515a"],legend:{position:"bottom",horizontalAlign:"center",fontSize:"14px",markers:{width:10,height:10,offsetX:-2},height:50,offsetY:20},plotOptions:{pie:{donut:{size:"65%",background:"transparent",labels:{show:!0,name:{show:!0,fontSize:"29px",offsetY:-10},value:{show:!0,fontSize:"26px",color:o?"#bfc9d4":void 0,offsetY:16,formatter:_=>`$${_}`},total:{show:!0,label:"Total",color:"#888ea8",fontSize:"29px",formatter:_=>`$${_.globals.seriesTotals.reduce((Vt,Bt)=>Vt+Bt,0)}`}}}}},labels:["Unlock","Tips"],states:{hover:{filter:{type:"none",value:.15}},active:{filter:{type:"none",value:.15}}},series:[h.unlock_sales_revenue,h.tips_revenue]}})()}updateYear(e){this.selectedYear=e,this.initInsights(this.selectedYear)}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(C.Z),t.Y36(Z),t.Y36(v.R),t.Y36(M.yh),t.Y36(r.uU))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["view-notes-modal"]],features:[t._Bn([r.uU])],decls:12,vars:5,consts:[[1,"animate","animate-fade-in"],["role","dialog","tabindex","-1",1,"modal","fade","ng-star-inserted","in"],[1,"modal-dialog","content","content-new"],[1,"modal-content"],[1,"modal-header"],[1,"ng-star-inserted"],["data-dismiss","modal","type","button","aria-label","Close",1,"close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"h-full","min-h-[500px]","space-y-0.5","ltr:-mr-3","rtl:-ml-3","flex","xl:flex-row","xl:justify-between","sm:flex-col","sm:items-center"],[1,"panel","h-auto","xl:col-span-2","sm:w-2/3","xl:w-1/4"],[1,"mb-5","flex","items-center","justify-between","dark:text-white-light"],[1,"text-lg","font-semibold"],[1,"dropdown","ltr:ml-auto","rtl:mr-auto"],["hlMenu",""],["hlMenuButton","","href","javascript:;",1,"align-middle"],[1,"text-black/70","hover:!text-primary","dark:text-white/70"],["class","ltr:right-0 rtl:left-0",4,"hlMenuItems"],[1,"mb-5","flex","items-center"],[1,"text-lg","font-semibold","dark:text-white-light"],[1,"overflow-hidden"],[1,"rounded-lg","bg-white","dark:bg-black",3,"series","chart","dataLabels","stroke","colors","legend","plotOptions","labels","states"],[1,"grid","min-h-[200px]","place-content-center","bg-white-light/30","dark:bg-dark","dark:bg-opacity-[0.08]"],[1,"inline-flex","h-5","w-5","animate-spin","rounded-full","border-2","border-black","!border-l-transparent","dark:border-white"],[1,"h-80","overflow-y","xl:h-96","xl:w-3/5","sm:w-full"],[4,"ngFor","ngForOf"],[1,"modal-footer","flex","flex-row","justify-between"],["type","button",1,"btn","btn-primary","ltr:ml-4","rtl:mr-4","ng-star-inserted",3,"click"],[1,"ltr:right-0","rtl:left-0"],[3,"click",4,"hlMenuItem"],[3,"click"],[1,"w-5/6","my-5","mx-auto","bg-white","shadow-[4px_6px_10px_-3px_#bfc9d4]","rounded","border","border-[#e0e6ed]","dark:border-[#1b2e4b]","dark:bg-[#191e3a]","dark:shadow-none","p-5"],[1,"text-[#515365]","dark:text-white-light"],[1,"font-semibold","italic","mb-5"],[1,"flex"],[1,"flex-1"],[1,"text-white-dark","mb-1.5"],["x-data","form",1,"bg-[#f1f2f3]","p-5","rounded","dark:bg-[#060818]"],["for","note"],["rows","3","wrap","soft","x-model","noteText","id","note",1,"form-textarea"],["noteText",""],["type","button",1,"btn","btn-danger","ltr:ml-4","rtl:mr-4","ng-star-inserted",3,"click"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return o.closeModal()}),t._uU(9,"\xd7"),t.qZA()(),t.YNc(10,yt,32,23,"div",7),t.YNc(11,Mt,15,6,"div",7),t.qZA()()()()),2&a&&(t.xp6(6),t.Oqu(t.lcZ(7,3,"insights_title")),t.xp6(4),t.Q6J("ngIf",!o.addNote),t.xp6(1),t.Q6J("ngIf",o.addNote))},dependencies:[r.sg,r.O5,p._Y,p.JL,p.F,m.B$,m.zk,m._f,m.e6,f.KC,T.d,y.x,r.uU,g.X$],styles:[".modal[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;min-height:100%}.modal.in[_ngcontent-%COMP%]{opacity:1}.content[_ngcontent-%COMP%]{max-width:56rem}@media screen and (max-width: 639px){.sm-grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media screen and (max-width: 1279px){.md-grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media screen and (min-width: 1279px){.content-new[_ngcontent-%COMP%]{max-width:80rem}}"],data:{animation:[(0,d.X$)("toggleAnimation",[(0,d.eR)(":enter",[(0,d.oB)({opacity:0,transform:"scale(0.95)"}),(0,d.jt)("100ms ease-out",(0,d.oB)({opacity:1,transform:"scale(1)"}))]),(0,d.eR)(":leave",[(0,d.jt)("75ms",(0,d.oB)({opacity:0,transform:"scale(0.95)"}))])])]}})}return n})();var kt=l(5300),At=l(2830),It=l(1545),Ut=l(9322),St=l(47);const Nt=["template"];function Lt(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"svg",1),t._UZ(1,"path",2)(2,"path",3)(3,"path",4)(4,"path",5)(5,"path",6),t.qZA()),2&n){const e=t.oxw();t.Q6J("ngClass",e.class)}}let Jt=(()=>{class n{constructor(e){this.viewContainerRef=e,this.class=""}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.viewContainerRef.element.nativeElement.remove()}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["icon-notes-edit"]],viewQuery:function(a,o){if(1&a&&t.Gf(Nt,7),2&a){let s;t.iGM(s=t.CRH())&&(o.template=s.first)}},inputs:{class:"class"},decls:2,vars:0,consts:[["template",""],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass"],["d","M18.18 8.03933L18.6435 7.57589C19.4113 6.80804 20.6563 6.80804 21.4241 7.57589C22.192 8.34374 22.192 9.58868 21.4241 10.3565L20.9607 10.82M18.18 8.03933C18.18 8.03933 18.238 9.02414 19.1069 9.89309C19.9759 10.762 20.9607 10.82 20.9607 10.82M18.18 8.03933L13.9194 12.2999C13.6308 12.5885 13.4865 12.7328 13.3624 12.8919C13.2161 13.0796 13.0906 13.2827 12.9882 13.4975C12.9014 13.6797 12.8368 13.8732 12.7078 14.2604L12.2946 15.5L12.1609 15.901M20.9607 10.82L16.7001 15.0806C16.4115 15.3692 16.2672 15.5135 16.1081 15.6376C15.9204 15.7839 15.7173 15.9094 15.5025 16.0118C15.3203 16.0986 15.1268 16.1632 14.7396 16.2922L13.5 16.7054L13.099 16.8391M13.099 16.8391L12.6979 16.9728C12.5074 17.0363 12.2973 16.9867 12.1553 16.8447C12.0133 16.7027 11.9637 16.4926 12.0272 16.3021L12.1609 15.901M13.099 16.8391L12.1609 15.901","stroke","currentColor","stroke-width","1.5"],["d","M8 13H10.5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["d","M8 9H14.5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["d","M8 17H9.5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M3 10C3 6.22876 3 4.34315 4.17157 3.17157C5.34315 2 7.22876 2 11 2H13C16.7712 2 18.6569 2 19.8284 3.17157C21 4.34315 21 6.22876 21 10V14C21 17.7712 21 19.6569 19.8284 20.8284C18.6569 22 16.7712 22 13 22H11C7.22876 22 5.34315 22 4.17157 20.8284C3 19.6569 3 17.7712 3 14V10Z","stroke","currentColor","stroke-width","1.5"]],template:function(a,o){1&a&&t.YNc(0,Lt,6,1,"ng-template",null,0,t.W1O)},dependencies:[r.mk],encapsulation:2})}return n})();const Ot=["template"];function Qt(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"svg",1),t._UZ(1,"path",2)(2,"path",3),t.qZA()),2&n){const e=t.oxw();t.Q6J("ngClass",e.class)}}let qt=(()=>{class n{constructor(e){this.viewContainerRef=e,this.class=""}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template),this.viewContainerRef.element.nativeElement.remove()}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["icon-paperclip"]],viewQuery:function(a,o){if(1&a&&t.Gf(Ot,7),2&a){let s;t.iGM(s=t.CRH())&&(o.template=s.first)}},inputs:{class:"class"},decls:2,vars:0,consts:[["template",""],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",3,"ngClass"],["d","M7.9175 17.8068L15.8084 10.2535C16.7558 9.34668 16.7558 7.87637 15.8084 6.96951M3 10.0346L9.40419 3.90441C12.0569 1.3652 16.3578 1.3652 19.0105 3.90441","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["opacity","0.5","d","M19.0105 13.0996L19.5291 13.6414L19.0105 13.0996ZM11.0624 20.7076L10.5438 20.1658L11.0624 20.7076ZM4.54388 14.4679L5.0625 15.0097L4.54388 14.4679ZM12.3776 6.9694L11.859 6.4276L12.3776 6.9694ZM19.5291 3.3625C19.2299 3.07608 18.7551 3.08646 18.4687 3.38568C18.1823 3.68491 18.1927 4.15967 18.4919 4.44609L19.5291 3.3625ZM18.4919 12.5578L10.5438 20.1658L11.581 21.2494L19.5291 13.6414L18.4919 12.5578ZM5.0625 15.0097L12.8962 7.51119L11.859 6.4276L4.02527 13.9262L5.0625 15.0097ZM16.327 6.4276C15.0896 5.24313 13.0964 5.24313 11.859 6.4276L12.8962 7.51119C13.5536 6.88194 14.6324 6.88194 15.2898 7.51119L16.327 6.4276ZM5.0625 20.1658C3.57096 18.7381 3.57096 16.4375 5.0625 15.0097L4.02527 13.9262C1.91671 15.9445 1.91671 19.2311 4.02527 21.2494L5.0625 20.1658ZM10.5438 20.1658C9.03379 21.6112 6.57253 21.6112 5.0625 20.1658L4.02527 21.2494C6.11533 23.25 9.49098 23.25 11.581 21.2494L10.5438 20.1658ZM18.4919 4.44609C20.8361 6.68999 20.8361 10.3139 18.4919 12.5578L19.5291 13.6414C22.4903 10.8069 22.4903 6.19703 19.5291 3.3625L18.4919 4.44609Z","fill","currentColor"]],template:function(a,o){1&a&&t.YNc(0,Qt,3,1,"ng-template",null,0,t.W1O)},dependencies:[r.mk],encapsulation:2})}return n})();var Yt=l(6509);const Ht=[{path:"chat",component:Z,title:"Dirty Dialogs | Chat",canActivate:[ct.xM],data:{module:"CHATS",submodule:"CHATTING"}}];let Dt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[b.Bz.forChild(Ht),r.ez,p.u5,p.UX,k.b,m.$9,f.kb.withConfig({visibility:"hover",appearance:"standard"}),A.fi.forRoot(),I.z,U.Ce,S.tA,N.Q,x.A0,g.aw,y.X]})}return n})();t.B6R(Z,function(){return[b.rH,r.mk,r.sg,r.O5,p.Fj,p.JJ,p.On,f.KC,kt.S,At.i,T.d,It.V,Ut.q,St.M,Jt,qt,Yt.$,x.w9,x.jq,Ct,Tt]},function(){return[r.Ov,r.rS,r.uU,g.X$]})}}]);